# Описание классов

## Alisa
Класс отвечающий за взаимодействие всех модулей.
Именно в данном классе происходит зваимодействие с картинками, кнопками и nlu
Класс для удобства унаследован от класса `AlisaSound`.

### Описание переменных
- `nlu` - Инициализированный класс AlisaNlu. Необходим для взаимодействия с nlu см. Документацию; Возможности навыков -> Именованные сущности в запросах.
- `image` - Класс для работы с картинками, а именно загрузка и отображение картинок в карточках и списках.
- `buttonBlock` - Класс для работы с кнопками.
- `sound` - Класс для работы с звуками.

## AlisaSound
Класс для обработки различных звуков и звуковых эффектов в навыке.

### Доступные звуковые эффекты
- `S_EFFECT_BEHIND_THE_WALL` - Голос из-за стены
- `S_EFFECT_HAMSTER` - Голос хомяка
- `S_EFFECT_MEGAPHONE` - Голос через мегафон
- `S_EFFECT_PITCH_DOWN` - Низкий голос
- `S_EFFECT_PSYCHODELIC` - Психоделический голос
- `S_EFFECT_PULSE` - Голос с прерываниями
- `S_EFFECT_TRAIN_ANNOUNCE` - Громкоговоритель на вокзале
- `S_EFFECT_END` - Закончить голосовой эффект
Все звуковые эффекты вызывать следующим образом:

```php
$text .= self::S_EFFECT_BEHIND_THE_WALL;
// Или так:
$text .= AlisaSound::S_EFFECT_BEHIND_THE_WALL;
```

Также класс способен загрузить или отобразить пользовательские звуки. Для этого нужно вызвать метод:
```php
$this->sound->addSound($file);
```
где 
`file` - Непосредственно звук.
В результате функция вернет true  в случае успешной загрузки, и false в противном случае.

## AlisaNLU
Класс для обработки nlu полученного из запроса пользователя.

### Описание переменных
- `nlu` - Полученный nlu навыка

## AlisaImageCard
Класс отвечающий за взаимодействие с картинками в навыке.
В данным классе происходит подгрузка изображений в навык, а так же отображение карточек и списков

### Описание переменных
- `isBigImage` - Использовать карточку или нет. В случае если будет использоваться карточка, необходимо инициализировать как `true`
- `imgDir` - Расположение картинки. Картинки загружаются только через интернет. Поэтому здесь желательно указывать url картинки
- `imageId` - Идентификатор картинки
- `title` - Заголова для карточки или списка.
- `description` - Описание для карточки. (Для списков игнорируется)
- `button` - Кнопка для карточки. (Игнорируется для списка). Кнопка это массив вида:
```php
[
    'text' => string, - Текст кнопки. (Обязательный параметр)
    'url' => string, - Ссылка на которую перейдет пользователь при нажатие на карточку. (Обязательный параметр, если не указан payload)
    'payload' => string - Произвольный json. Использовать только его, если не нужно перенаправлять пользователя на сайт. (Обязательный параметр если не указан url)
]
```
- `isItemsList` - Использовать список или нет
- `isItemsImage` - Отображать в списке картинки или нет.
- `footerText` - Текс для ссылки в footer
- `footerButton` - Кнопка для обработки нажатия на footer. Представляет из себя тот же массив что и `button`

### Работа с коллекциями
Для того чтобы отобразить пользователю коллекцию, необходимо вызывать функцию:
```php
public function addImages($imgDir, $title, $description, $button = null);
```
Где
- `imgDir` - Расположение картинки. Если поле равно '' или null, то данный элемент списка отобразится без картинки.
- `title` - Заголовок для элемента списка.
- `description` - Описание элемента списка
- `button` - Кнопка, обрабатывающая нажатие на элемент списка. Представляет из себя массив как и `button`. А так же может быть инициализирован как строка. Тогда автоматически заполнятся поля `text` и `payload`. Пример использования:
```php
/**
* Карточка
**/
    $this->image->isBigImage = true; // Указываем что используем карточку
    $this->image->title = 'Title'; // Заполяем заголовок для карточки
    $this->image->description = 'Description'; // Заполяем описание для карточки
            
    $this->image->button = ['text' => 'button', 'url' => 'https://www.islandgift.ru', 'payload' => 'payload']; // Указываем кнопку, если необходимо.
    //$this->image->button = ['text' => 'button', 'url' => 'https://www.islandgift.ru']; // Указываем кнопку с url.
    //$this->image->button = ['text' => 'button', 'payload' => 'payload']; // Указываем кнопку с payload.
/**
* Список
**/
    $this->image->isItemsList = true; // Указываем что использовать список
    $this->image->title = 'Title'; // Заполняем заголовок для списка
    $button = ['text' => 'button', 'url' => 'https://www.islandgift.ru', 'payload' => 'payload']; // Создаем кнопку
    $this->image->addImages('imgDir', 'Title', 'Description', $button); // Добавляем картинки с кнопкой
    $this->image->addImages('imgDir', 'Title', 'Description', 'text');  // Добавляем блок с кнопкой в виде текста
    $this->image->addImages('', 'Title', 'Description');    // Добавляем блок без картинки и кнопки
    $this->image->footerText = 'Footer'; // Заполняем поле footer если необходимо
    $this->image->footerButton = $button; // Указываем кнопку для footera
```
```php
$this->image->footerButton
```
 - и 
```php
$this->image->button
```
 - Можно указать как строку.
В таком случае кнопка получит вид 
```php
[
    'text' => ...,
    'payload' => ...
]
```


## AlisaButton
Класс для отображения различных кнопок (Кнопка, ссылка).
### Описание переменных
- `payload` - Произвольный json
- `title` - Текст кнопки
- `hide` - Отображать как кнопку или ссылку. Инициализируется как `self::B_LINK` или `self::B_BTN`
- `url` - Ссылка по которой нужно будет перейти после нажатия на кнопку
